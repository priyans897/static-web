<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SECURE ACCESS PROTOCOL v4.1</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles for the terminal aesthetic */
        body {
            /* Use a dark, highly contrasted theme */
            background-color: #050a0e; /* Very dark blue/black */
            color: #00ff41; /* Neon green */
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            overflow: hidden; /* Prevent body scroll, content scrolls internally */
            height: 100vh;
            display: flex;
            flex-direction: column;
            --main-green: #00ff41;
        }

        /* Blinking cursor animation */
        @keyframes blink {
            0%, 100% { background-color: var(--main-green); }
            50% { background-color: transparent; }
        }

        .cursor {
            display: inline-block;
            width: 8px;
            height: 1em; /* Matches font height */
            margin-left: 2px;
            animation: blink 1s step-end infinite;
            vertical-align: middle;
        }

        /* Styling for the main log output area */
        #log-output {
            flex-grow: 1;
            overflow-y: auto;
            padding: 1rem;
            line-height: 1.25; /* Tighter lines */
            font-size: 0.875rem; /* Small font size */
            white-space: pre-wrap; /* Preserve formatting and wrap text */
            scrollbar-width: none; /* Hide scrollbar for Firefox */
        }

        /* Hide scrollbar for Chrome, Safari, and Opera */
        #log-output::-webkit-scrollbar {
            display: none;
        }

        .log-line {
            opacity: 0.8;
            transition: opacity 0.5s;
        }

        .log-error {
            color: #ff0041; /* Red for errors */
        }
        .log-success {
            color: #00ffff; /* Cyan for success/important data */
        }
        .log-info {
            color: #ffcc00; /* Yellow for informational messages */
        }

        /* Input command line styling */
        .command-line-container {
            padding: 1rem;
            border-top: 1px solid rgba(0, 255, 65, 0.2);
            flex-shrink: 0;
        }
        #command-input {
            width: 100%;
            background: transparent;
            border: none;
            color: #00ff41;
            outline: none;
            font-family: inherit;
            font-size: 1rem;
        }
        .prompt {
            color: #00ff41;
            padding-right: 0.5rem;
        }
    </style>
</head>
<body class="antialiased">

    <!-- Terminal Header / Status Bar -->
    <div class="p-3 bg-black text-xs border-b border-green-700/50 flex justify-between flex-shrink-0">
        <span id="system-status">STATUS: INITIALIZING...</span>
        <span id="time-display"></span>
    </div>

    <!-- Main Log Output Area -->
    <div id="log-output">
        <!-- Initial system boot message -->
        <pre class="log-line text-xs log-info">
        /////////////////////////////////////////////////////////////////////////
        //                                                                     //
        //          Initializing Secure Protocol Engine v4.1.0 (BETA)          //
        //          Authorizing connection via remote terminal access...       //
        //                                                                     //
        /////////////////////////////////////////////////////////////////////////
        </pre>
        <pre class="log-line">>>> 08:31:01 -- SYSTEM -- Boot sequence initiated.</pre>
    </div>

    <!-- Command Input Area -->
    <div class="command-line-container">
        <div class="flex items-center">
            <span class="prompt text-lg font-bold">[USER@TERMINAL] $</span>
            <input type="text" id="command-input" placeholder="Type command here..." autofocus>
            <span class="cursor"></span>
        </div>
    </div>

    <script>
        // Global variables for Firebase setup (required for Canvas environment)
        // These are intentionally left as empty strings/default values as per instructions
        const __app_id = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const __firebase_config = typeof __firebase_config !== 'undefined' ? __firebase_config : '{}';
        const __initial_auth_token = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : undefined;

        const logOutput = document.getElementById('log-output');
        const systemStatus = document.getElementById('system-status');
        const timeDisplay = document.getElementById('time-display');
        const commandInput = document.getElementById('command-input');

        let logCount = 0;
        const logMessages = [
            { type: 'info', msg: 'Checking network topology... OK' },
            { type: 'info', msg: 'Compiling core data modules... Complete' },
            { type: 'success', msg: 'AUTHENTICATION MODULE: User session validated. Access granted.' },
            { type: 'error', msg: 'WARNING: Connection instability detected. Retrying handshake...' },
            { type: 'info', msg: 'Executing data stream pre-fetch. Target: /tmp/cache_0x9f0e' },
            { type: 'info', msg: 'System integrity check (CRC-32)... Running' },
            { type: 'success', msg: 'System integrity check (CRC-32)... PASSED' },
            { type: 'info', msg: 'Loading encrypted kernel extension 0xEE7F...' },
            { type: 'info', msg: 'Pinging remote server 192.168.1.254... Response time: 4ms' },
            { type: 'info', msg: 'Processing stream data chunk 12/45...' },
            { type: 'error', msg: 'ACCESS DENIED to resource /etc/shadow. Permission 700 required.' },
            { type: 'success', msg: 'Data synchronization successful. Hash: 8b3c1a2d' },
            { type: 'info', msg: 'Initiating deep packet inspection on port 22...' },
            { type: 'info', msg: 'Memory usage: 78% | CPU load: 45%' }
        ];

        /**
         * Generates and appends a new, random log line to the output.
         */
        function writeLogLine() {
            // Get a random log message
            const randomIndex = Math.floor(Math.random() * logMessages.length);
            const { type, msg } = logMessages[randomIndex];

            // Get current time stamp
            const now = new Date();
            const timeStr = `${String(now.getHours()).padStart(2, '0')}:${String(now.getMinutes()).padStart(2, '0')}:${String(now.getSeconds()).padStart(2, '0')}`;

            // Create the log line element
            const pre = document.createElement('pre');
            pre.className = `log-line text-xs log-${type}`;
            pre.textContent = `>>> ${timeStr} -- ${type.toUpperCase()} -- ${msg}`;

            // Append to the log output
            logOutput.appendChild(pre);

            // Keep only the last 50 lines to prevent memory overflow
            if (logOutput.children.length > 50) {
                logOutput.removeChild(logOutput.children[0]);
            }

            // Scroll to the bottom to simulate real-time updates
            logOutput.scrollTop = logOutput.scrollHeight;

            logCount++;
            if (logCount > 10) {
                systemStatus.textContent = 'STATUS: ONLINE // ENCRYPTED';
            }
        }

        /**
         * Updates the time display in the status bar.
         */
        function updateTime() {
            const now = new Date();
            const timeStr = now.toLocaleTimeString('en-US', { hour12: false, hour: '2-digit', minute: '2-digit', second: '2-digit' });
            timeDisplay.textContent = `TIME: ${timeStr} (UTC+0)`;
        }

        /**
         * Handles the command input logic (just simulates execution).
         */
        commandInput.addEventListener('keydown', function(event) {
            if (event.key === 'Enter') {
                event.preventDefault(); // Prevent form submission
                const command = commandInput.value.trim();
                commandInput.value = ''; // Clear input

                if (command.length > 0) {
                    // Display the executed command
                    const preCommand = document.createElement('pre');
                    preCommand.className = 'log-line text-sm';
                    preCommand.textContent = `[USER@TERMINAL] $ ${command}`;
                    logOutput.appendChild(preCommand);

                    // Simulate a response
                    let responseMsg = `Command '${command}' executed successfully.`;
                    let responseType = 'success';

                    if (command.toLowerCase().includes('help')) {
                        responseMsg = 'Available commands: scan, connect, decrypt, status, clear.';
                        responseType = 'info';
                    } else if (command.toLowerCase().includes('clear')) {
                        // Clear the log, keeping the initial header
                        while (logOutput.children.length > 2) {
                            logOutput.removeChild(logOutput.children[2]);
                        }
                        responseMsg = 'Terminal cleared.';
                        responseType = 'info';
                    } else if (command.toLowerCase().includes('fail')) {
                        responseMsg = 'ERROR 502: Connection refused by target server.';
                        responseType = 'error';
                    } else if (command.toLowerCase().includes('scan')) {
                        responseMsg = 'Scanning local network... Found 12 devices. Open port 8080 on 10.0.0.14.';
                        responseType = 'info';
                    }

                    const preResponse = document.createElement('pre');
                    preResponse.className = `log-line text-sm log-${responseType}`;
                    preResponse.textContent = `[SYSTEM RESPONSE] ${responseMsg}`;
                    logOutput.appendChild(preResponse);

                    logOutput.scrollTop = logOutput.scrollHeight;
                }
            }
        });

        /**
         * Initialization function
         */
        window.onload = function() {
            // Start the rapid log line generation
            setInterval(writeLogLine, 500); // New log every half second

            // Update time in the header every second
            setInterval(updateTime, 1000);
            updateTime(); // Initial call
        };
    </script>
</body>
</html>